<!DOCTYPE html>
<html>
	<head>
        <script src="phonegap.js"></script>
	<link rel="stylesheet" type="text/css" href="css.css">
        <script type="text/javascript" charset="utf-8" src="jquery.js"></script>
	<script>
		var bPHONEGAP = true;
	</script>
	</head>

	 <body>
	
            <div>                
                <div class='panel1'>
                    
                    <div class='buttonMusic' bsq-id='0'>
                        <!--<p>1</p>-->
                    </div>
                    <div class='buttonMusic' bsq-id='1'>
                       <!-- <p>2</p>-->
                    </div>
                    <div class='buttonMusic' bsq-id='2'>
                       <!-- <p>3</p>-->
                    </div>
                    
                    <div class='buttonMusic' bsq-id='3'>
                        <!--<p>4</p>-->
                    </div>
                    <div class='buttonMusic' bsq-id='4'>
                       <!-- <p>5</p>-->
                    </div>
                    <div class='buttonMusic' bsq-id='5'>
                       <!-- <p>6</p>-->
                    </div>
                    
                    <p id='timeMusic'>Time</p>
                    
                </div>                
                
                
                
                
            </div>
            
            <script>
                var listAudio = [];
                
                listAudio[0] = new Audio("res/EF_UBEAT_01.mp3");
                listAudio[1] = new Audio("res/EF_UBEAT_02.mp3");
                listAudio[2] = new Audio("res/EF_UBEAT_03.mp3");
            
                listAudio[3] = new Audio("res/EF_UBEAT_04.mp3");
                listAudio[4] = new Audio("res/EF_UBEAT_05.mp3");
                listAudio[5] = new Audio("res/EF_UBEAT_06.mp3");
                
                var counter = 0;                
                function playSound(id){
                    if(bPHONEGAP){
                        
                        var url = "res/EF_UBEAT_0"+(id+1)+".mp3";
                        
                        var my_media = new Media(url,
                            // success callback
                            function () {
                                //console.log("playAudio():Audio Success");
                                my_media.release();
                            },
                            // error callback
                            function (err) {
                                //console.log("playAudio():Audio Error: " + err);
                            }
                        );
                        // Play audio
                        my_media.play();
                        
                    }else{
                        if (listAudio[id].currentTime > 0 ) {
                                listAudio[id].pause();
                                listAudio[id].currentTime = 0;
                                listAudio[id].play();
                        }
                        else{
                                listAudio[id].play();
                        }    
                    }
                    
                    
                    $("#timeMusic").html(counter++);
                }
                
               
                
                if(bPHONEGAP) document.addEventListener("deviceready", onDeviceReady, false);
                else {
                    $(document).ready(function(){
                        onDeviceReady();
                    })    
                }
                
                
                function onDeviceReady() {
                    window.addEventListener("touchmove",function(e){
                        e.preventDefault();
                    })
                    
                    $(".buttonMusic").bind("touchstart",function(){
                    
                        var tempid = $(this).attr("bsq-id");
                        playSound(tempid);
                        
                        $(this).css({
                            'background' : 'red'
                        })
                    })
                    
                    $(".buttonMusic").bind("touchend",function(){
                        
                        //var tempid = $(this).attr("bsq-id");
                        //playSound(tempid);
                        
                        $(this).css({
                            'background' : 'white'
                        })
                        
                    })
                }
                
                
            </script>
        </body>
</html>